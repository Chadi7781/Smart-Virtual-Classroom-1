import{g as n}from"./p-f8abe418.js";import{f as o,l as t}from"./p-29b5bd7f.js";import{g as r}from"./p-0cbaf141.js";const s=(o,t)=>function(o,t,r){void 0===r&&(r=!0);var s="Function"===o.constructor.name?o.prototype:o,e=s.componentWillLoad;s.componentWillLoad=function(){var o,s=this,i=n(this),u={promise:new Promise((function(n){o=n})),resolve:o},a=new CustomEvent("openWormhole",{bubbles:!0,composed:!0,detail:{consumer:this,fields:t,updater:function(n,o){s[n]=o},onOpen:u}});i.dispatchEvent(a);var f=function(){if(e)return e.call(s)};return r?u.promise.then((function(){return f()})):f()}}(o,t),e=async(n,s,e,i)=>{const u=i??await o(n),a=s.map((n=>{const o=r(n);return t(u,o,(()=>{e(n,u[n])}))}));return()=>{a.forEach((n=>n()))}};export{e as u,s as w}