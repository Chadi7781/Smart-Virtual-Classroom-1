import{r as t,h as i,F as s,c as e,g as n}from"./p-f8abe418.js";import{D as o,w as a,m as r,l,f as c,c as h,g as d,v,o as u}from"./p-29b5bd7f.js";import{c as m}from"./p-c21e749f.js";import{w as p}from"./p-cdfa9679.js";import"./p-0cbaf141.js";import{P as b}from"./p-121aab6e.js";import{d as g}from"./p-23929c27.js";import{w as y}from"./p-e03c9ffb.js";import{L as k}from"./p-3fb38170.js";const f=class{constructor(i){t(this,i),this.sizeDisposal=new o,this.textDisposal=new o,this.isEnabled=!1,this.fontSize="sm",this.hidden=!1,this.isControlsActive=!1,this.isVideoView=!1,this.playbackStarted=!1,this.textTracks=[],this.currentTextTrack=-1,this.isTextTrackVisible=!0,a(this),y(this),p(this,["isVideoView","playbackStarted","isControlsActive","textTracks","currentTextTrack","isTextTrackVisible"])}onEnabledChange(){this.isEnabled=this.playbackStarted&&this.isVideoView}onTextTracksChange(){const t=this.textTracks[this.currentTextTrack],i=()=>{const i=Array.from(t.activeCues??[]);this.renderCurrentCue(i[0])};this.textDisposal.empty(),r(t)||(i(),this.textDisposal.add(l(t,"cuechange",i)))}connectedCallback(){this.dispatch=m(this),this.dispatch("shouldRenderNativeTextTracks",!1),this.onTextTracksChange(),this.onPlayerResize()}disconnectedCallback(){this.textDisposal.empty(),this.sizeDisposal.empty(),this.dispatch("shouldRenderNativeTextTracks",!0)}async onPlayerResize(){const t=await c(this),i=await t.getContainer();new ResizeObserver((t=>{const i=t[0],{width:s}=i.contentRect;this.fontSize=s>=1360?"xl":s>=1024?"lg":s>=768?"md":"sm"})).observe(i)}renderCurrentCue(t){if(r(t))return void(this.cue="");const i=document.createElement("div");i.append(t.getCueAsHTML()),this.cue=i.innerHTML.trim()}render(){return i("div",{style:{transform:`translateY(calc(${this.isControlsActive?"var(--vm-controls-height)":"24px"} * -1))`},class:{captions:!0,enabled:this.isEnabled,hidden:this.hidden,fontMd:"md"===this.fontSize,fontLg:"lg"===this.fontSize,fontXl:"xl"===this.fontSize,inactive:!this.isTextTrackVisible}},i("span",{class:"cue"},this.cue))}static get watchers(){return{isVideoView:["onEnabledChange"],playbackStarted:["onEnabledChange"],textTracks:["onTextTracksChange"],currentTextTrack:["onTextTracksChange"]}}};f.style=":host{position:absolute;left:0;bottom:0;width:100%;pointer-events:none;z-index:var(--vm-captions-z-index)}.captions{width:100%;text-align:center;color:var(--vm-captions-text-color);font-size:var(--vm-captions-font-size);padding:$control-spacing;display:none;pointer-events:none;transition:transform 0.4s ease-in-out, opacity 0.3s ease-in-out}.captions.enabled{display:inline-block}.captions.hidden{display:none !important}.captions.inactive{opacity:0;visibility:hidden}.captions.fontMd{font-size:var(--vm-captions-font-size-medium)}.captions.fontLg{font-size:var(--vm-captions-font-size-large)}.captions.fontXl{font-size:var(--vm-captions-font-size-xlarge)}.cue{display:inline-block;background:var(--vm-captions-cue-bg-color);border-radius:var(--vm-captions-cue-border-radius);box-decoration-break:clone;line-height:185%;padding:var(--vm-captions-cue-padding);white-space:pre-wrap;pointer-events:none}.cue>div{display:inline}.cue:empty{display:none}";const x=class{constructor(i){t(this,i),this.useOnMobile=!1,this.paused=!0,this.isVideoView=!1,this.isMobile=!1,a(this),p(this,["paused","isVideoView","isMobile"])}connectedCallback(){this.dispatch=m(this)}async forceClick(){this.onClick()}onClick(){this.dispatch("paused",!this.paused)}render(){return i("div",{class:{clickToPlay:!0,enabled:this.isVideoView&&(!this.isMobile||this.useOnMobile)},onClick:this.onClick.bind(this)})}};x.style=":host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--vm-click-to-play-z-index)}.clickToPlay{display:none;width:100%;height:100%;pointer-events:none}.clickToPlay.enabled{display:inline-block;pointer-events:auto}";const w=class{constructor(i){t(this,i),this.canSetFullscreen=!1,this.useOnMobile=!1,this.isFullscreenActive=!0,this.isVideoView=!1,this.playbackReady=!1,this.isMobile=!1,this.clicks=0,a(this),p(this,["playbackReady","isFullscreenActive","isVideoView","isMobile"])}async onPlaybackReadyChange(){const t=await c(this);this.canSetFullscreen=await t.canSetFullscreen()}async onTriggerClickToPlay(){const[t]=h(this,"vm-click-to-play");await(t?.forceClick())}async onToggleFullscreen(){const t=await c(this);this.isFullscreenActive?t.exitFullscreen():t.enterFullscreen()}onClick(){this.clicks+=1,1===this.clicks&&setTimeout((()=>{1===this.clicks?this.onTriggerClickToPlay():this.onToggleFullscreen(),this.clicks=0}),300)}render(){return i("div",{class:{dblClickFullscreen:!0,enabled:this.playbackReady&&this.canSetFullscreen&&this.isVideoView&&(!this.isMobile||this.useOnMobile)},onClick:this.onClick.bind(this)})}static get watchers(){return{playbackReady:["onPlaybackReadyChange"]}}};w.style=":host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--vm-dbl-click-fullscreen-z-index)}.dblClickFullscreen{display:none;width:100%;height:100%;pointer-events:none}.dblClickFullscreen.enabled{display:inline-block;pointer-events:auto}";const C=class{constructor(i){t(this,i),this.activeDuration=2750,this.waitForPlaybackStart=!1,this.hideWhenPaused=!1,this.hideOnMouseLeave=!1,this.isMobile=!1,this.isLive=!1,this.isAudioView=!1,this.isVideoView=!1,a(this),p(this,["theme","isMobile","isAudioView","isVideoView","isLive"])}buildAudioControls(){return i("vm-controls",{fullWidth:!0},i("vm-playback-control",{tooltipDirection:"right"}),i("vm-volume-control",null),!this.isLive&&i("vm-current-time",null),this.isLive&&i("vm-control-spacer",null),!this.isLive&&i("vm-scrubber-control",null),this.isLive&&i("vm-live-indicator",null),!this.isLive&&i("vm-end-time",null),!this.isLive&&i("vm-settings-control",{tooltipDirection:"left"}),i("div",{style:{marginLeft:"0",paddingRight:"2px"}}))}buildMobileVideoControls(){return i(s,null,i("vm-scrim",{gradient:"up"}),i("vm-controls",{pin:"topLeft",fullWidth:!0,activeDuration:this.activeDuration,waitForPlaybackStart:this.waitForPlaybackStart,hideWhenPaused:this.hideWhenPaused},i("vm-control-spacer",null),i("vm-volume-control",null),!this.isLive&&i("vm-caption-control",null),!this.isLive&&i("vm-settings-control",null),this.isLive&&i("vm-fullscreen-control",null)),i("vm-controls",{pin:"center",justify:"center",activeDuration:this.activeDuration,waitForPlaybackStart:this.waitForPlaybackStart,hideWhenPaused:this.hideWhenPaused},i("vm-playback-control",{style:{"--vm-control-scale":"1.3"}})),!this.isLive&&i("vm-controls",{pin:"bottomLeft",fullWidth:!0,activeDuration:this.activeDuration,waitForPlaybackStart:this.waitForPlaybackStart,hideWhenPaused:this.hideWhenPaused},i("vm-control-group",null,i("vm-current-time",null),i("vm-control-spacer",null),i("vm-end-time",null),i("vm-fullscreen-control",null)),i("vm-control-group",{space:"top"},i("vm-scrubber-control",null))))}buildDesktopVideoControls(){return i(s,null,"light"!==this.theme&&i("vm-scrim",{gradient:"up"}),i("vm-controls",{fullWidth:!0,pin:"bottomRight",activeDuration:this.activeDuration,waitForPlaybackStart:this.waitForPlaybackStart,hideWhenPaused:this.hideWhenPaused,hideOnMouseLeave:this.hideOnMouseLeave},!this.isLive&&i("vm-control-group",null,i("vm-scrubber-control",null)),i("vm-control-group",{space:this.isLive?"none":"top"},i("vm-playback-control",{tooltipDirection:"right"}),i("vm-volume-control",null),!this.isLive&&i("vm-time-progress",null),i("vm-control-spacer",null),!this.isLive&&i("vm-caption-control",null),this.isLive&&i("vm-live-indicator",null),i("vm-pip-control",null),!this.isLive&&i("vm-settings-control",null),i("vm-fullscreen-control",{tooltipDirection:"left"}))))}render(){return this.isAudioView?this.buildAudioControls():this.isVideoView&&this.isMobile?this.buildMobileVideoControls():this.isVideoView?this.buildDesktopVideoControls():null}};C.style=":host{display:contents;pointer-events:none;z-index:var(--vm-controls-z-index)}";const T=class{constructor(i){t(this,i),this.textTracksDisposal=new o,this.canSetPlaybackRate=!1,this.canSetPlaybackQuality=!1,this.canSetTextTrack=!1,this.canSetAudioTrack=!1,this.pin="bottomRight",this.i18n={},this.playbackReady=!1,this.playbackRate=1,this.playbackRates=[1],this.isVideoView=!1,this.playbackQualities=[],this.textTracks=[],this.currentTextTrack=-1,this.audioTracks=[],this.currentAudioTrack=-1,this.isTextTrackVisible=!0,a(this),p(this,["i18n","playbackReady","playbackRate","playbackRates","playbackQuality","playbackQualities","isVideoView","textTracks","currentTextTrack","isTextTrackVisible","audioTracks","currentAudioTrack"])}async onPlaybackReady(){const t=await c(this);this.canSetPlaybackQuality=await t.canSetPlaybackQuality(),this.canSetPlaybackRate=await t.canSetPlaybackRate()}async onAudioTracksChange(){const t=d(this);this.canSetAudioTrack=await(t?.canSetAudioTrack())??!1}async onTextTracksChange(){const t=d(this);this.canSetTextTrack=await(t?.canSetTextTrack())??!1}connectedCallback(){this.dispatch=m(this)}componentDidLoad(){this.onTextTracksChange()}disconnectedCallback(){this.textTracksDisposal.empty()}onPlaybackRateSelect(t){this.dispatch("playbackRate",parseFloat(t.target.value))}buildPlaybackRateSubmenu(){if(this.playbackRates.length<=1||!this.canSetPlaybackRate)return i("vm-menu-item",{label:this.i18n.playbackRate,hint:this.i18n.normal});const t=t=>1===t?this.i18n.normal:""+t;return i("vm-submenu",{label:this.i18n.playbackRate,hint:t(this.playbackRate)},i("vm-menu-radio-group",{value:""+this.playbackRate,onVmCheck:this.onPlaybackRateSelect.bind(this)},this.playbackRates.map((s=>i("vm-menu-radio",{label:t(s),value:""+s})))))}onPlaybackQualitySelect(t){this.dispatch("playbackQuality",t.target.value)}buildPlaybackQualitySubmenu(){if(this.playbackQualities.length<=1||!this.canSetPlaybackQuality)return i("vm-menu-item",{label:this.i18n.playbackQuality,hint:this.playbackQuality??this.i18n.auto});const t=t=>{const i=parseInt(t.slice(0,-1),10);return i>=2160?"UHD":i>=1080?"HD":void 0};return i("vm-submenu",{label:this.i18n.playbackQuality,hint:this.playbackQuality},i("vm-menu-radio-group",{value:this.playbackQuality,onVmCheck:this.onPlaybackQualitySelect.bind(this)},this.playbackQualities.map((s=>i("vm-menu-radio",{label:s,value:s,badge:t(s)})))))}onTextTrackSelect(t){const i=parseInt(t.target.value,10),s=d(this);-1!==i?(s?.setTextTrackVisibility(!0),s?.setCurrentTextTrack(i)):s?.setTextTrackVisibility(!1)}buildTextTracksSubmenu(){return this.textTracks.length<=1||!this.canSetTextTrack?i("vm-menu-item",{label:this.i18n.subtitlesOrCc,hint:this.textTracks[this.currentTextTrack]?.label??this.i18n.none}):i("vm-submenu",{label:this.i18n.subtitlesOrCc,hint:this.isTextTrackVisible?this.textTracks[this.currentTextTrack]?.label:this.i18n.off},i("vm-menu-radio-group",{value:""+(this.isTextTrackVisible?this.currentTextTrack:-1),onVmCheck:this.onTextTrackSelect.bind(this)},[i("vm-menu-radio",{label:this.i18n.off,value:"-1"})].concat(this.textTracks.map(((t,s)=>i("vm-menu-radio",{label:t.label,value:""+s}))))))}onAudioTrackSelect(t){const i=parseInt(t.target.value,10);d(this)?.setCurrentAudioTrack(i)}buildAudioTracksMenu(){return this.audioTracks.length<=1||!this.canSetAudioTrack?i("vm-menu-item",{label:this.i18n.audio,hint:this.audioTracks[this.currentAudioTrack]?.label??this.i18n.default}):i("vm-submenu",{label:this.i18n.audio,hint:this.audioTracks[this.currentAudioTrack]?.label},i("vm-menu-radio-group",{value:""+this.currentAudioTrack,onVmCheck:this.onAudioTrackSelect.bind(this)},this.audioTracks.map(((t,s)=>i("vm-menu-radio",{label:t.label,value:""+s})))))}render(){return i("vm-settings",{pin:this.pin},this.buildAudioTracksMenu(),this.buildPlaybackRateSubmenu(),this.buildPlaybackQualitySubmenu(),this.isVideoView&&this.buildTextTracksSubmenu(),i("slot",null))}static get watchers(){return{playbackReady:["onPlaybackReady","onAudioTracksChange","onTextTracksChange"],audioTracks:["onAudioTracksChange"],textTracks:["onTextTracksChange"]}}};T.style=":host{z-index:var(--vm-menu-z-index)}";const z=class{constructor(i){t(this,i),this.playbackReady=!1,this.hideDots=!1,a(this),p(this,["playbackReady"])}render(){return i("div",{class:{loadingScreen:!0,inactive:this.playbackReady}},i("slot",null),!this.hideDots&&i("div",{class:"dotPulse"}))}};z.style=":host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--vm-loading-screen-z-index);display:flex;align-items:center;justify-content:center}.loadingScreen{opacity:100;transition:var(--vm-fade-transition)}.loadingScreen.inactive{opacity:0}.dotPulse{position:relative;left:-9999px;width:var(--vm-loading-screen-dot-size);height:var(--vm-loading-screen-dot-size);border-radius:calc(var(--vm-loading-screen-dot-size) / 2);background-color:var(--vm-loading-screen-dot-color);color:var(--vm-loading-screen-dot-color);box-shadow:9999px 0 0 calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1) var(--vm-loading-screen-dot-color);animation:dotPulse var(--vm-loading-screen-pulse-duration) infinite linear;animation-delay:calc(var(--vm-loading-screen-pulse-duration) / 6)}.dotPulse::before,.dotPulse::after{content:'';display:inline-block;position:absolute;top:0;width:var(--vm-loading-screen-dot-size);height:var(--vm-loading-screen-dot-size);border-radius:calc(var(--vm-loading-screen-dot-size) / 2);background-color:var(--vm-loading-screen-dot-color);color:var(--vm-loading-screen-dot-color)}.dotPulse::before{box-shadow:9984px 0 0 calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1) var(--vm-loading-screen-dot-color);animation:dotPulseBefore var(--vm-loading-screen-pulse-duration) infinite linear;animation-delay:0s}.dotPulse::after{box-shadow:10014px 0 0 calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1) var(--vm-loading-screen-dot-color);animation:dotPulseAfter var(--vm-loading-screen-pulse-duration) infinite linear;animation-delay:calc(var(--vm-loading-screen-pulse-duration) / 3)}@keyframes dotPulseBefore{0%{box-shadow:9984px 0 0 calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1) var(--vm-loading-screen-dot-color)}30%{box-shadow:9984px 0 0 2px var(--vm-loading-screen-dot-color)}60%,100%{box-shadow:9984px 0 0 calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1) var(--vm-loading-screen-dot-color)}}@keyframes dotPulse{0%{box-shadow:9999px 0 0 calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1) var(--vm-loading-screen-dot-color)}30%{box-shadow:9999px 0 0 2px var(--vm-loading-screen-dot-color)}60%,100%{box-shadow:9999px 0 0 calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1) var(--vm-loading-screen-dot-color)}}@keyframes dotPulseAfter{0%{box-shadow:10014px 0 0 calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1) var(--vm-loading-screen-dot-color)}30%{box-shadow:10014px 0 0 2px var(--vm-loading-screen-dot-color)}60%,100%{box-shadow:10014px 0 0 calc(calc(var(--vm-loading-screen-dot-size) / 2) * -1) var(--vm-loading-screen-dot-color)}}";const P=class{constructor(i){t(this,i),this.vmLoaded=e(this,"vmLoaded",3),this.vmWillShow=e(this,"vmWillShow",3),this.vmWillHide=e(this,"vmWillHide",3),this.isHidden=!0,this.isActive=!1,this.hasLoaded=!1,this.fit="cover",this.isVideoView=!1,this.playbackStarted=!1,this.currentTime=0,a(this),p(this,["mediaTitle","currentPoster","playbackStarted","currentTime","isVideoView"])}onCurrentPosterChange(){this.hasLoaded=!1,this.lazyLoader?.onMutation()}connectedCallback(){this.lazyLoader=new k(this.host,["data-src","src"],(t=>{const i=t.getAttribute("data-src");t.removeAttribute("src"),v(i)||t.setAttribute("src",i)})),this.onEnabledChange(),this.onActiveChange()}disconnectedCallback(){this.lazyLoader.destroy()}onVisibilityChange(){!this.isHidden&&this.isActive?this.vmWillShow.emit():this.vmWillHide.emit()}onEnabledChange(){this.isHidden=!this.isVideoView,this.onVisibilityChange()}onActiveChange(){this.isActive=!this.playbackStarted||this.currentTime<=.1,this.onVisibilityChange()}onPosterLoad(){this.vmLoaded.emit(),this.hasLoaded=!0}render(){return i("div",{class:{poster:!0,hidden:this.isHidden,active:this.isActive&&this.hasLoaded}},i("img",{class:"lazy","data-src":this.currentPoster,alt:u(this.mediaTitle)?"Media Poster":this.mediaTitle+" Poster",style:{objectFit:this.fit},onLoad:this.onPosterLoad.bind(this)}))}get host(){return n(this)}static get watchers(){return{currentPoster:["onCurrentPosterChange"],isVideoView:["onEnabledChange"],currentTime:["onActiveChange"],playbackStarted:["onActiveChange"]}}};P.style=":host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--vm-poster-z-index)}.poster{width:100%;height:100%;background:#000;opacity:0;visibility:hidden;pointer-events:none;transition:var(--vm-fade-transition)}.poster.hidden{display:none}.poster.active{opacity:1;visibility:visible}img{width:100%;height:100%;pointer-events:none}";const V=class{constructor(i){t(this,i),this.vmWillShow=e(this,"vmWillShow",3),this.vmWillHide=e(this,"vmWillHide",3),this.blacklist=[b.YouTube],this.isHidden=!0,this.isActive=!1,this.isVideoView=!1,this.showWhenMediaLoading=!1,this.playbackReady=!1,this.buffering=!1,a(this),p(this,["isVideoView","buffering","playbackReady","currentProvider"])}onVideoViewChange(){this.isHidden=!this.isVideoView,this.onVisiblityChange()}onActiveChange(){this.isActive=this.buffering||this.showWhenMediaLoading&&!this.playbackReady,this.onVisiblityChange()}onVisiblityChange(){!this.isHidden&&this.isActive?this.vmWillShow.emit():this.vmWillHide.emit()}render(){return i("div",{class:{spinner:!0,hidden:this.isHidden||this.blacklist.includes(this.currentProvider),active:this.isActive}},i("div",{class:{spin:!0,active:this.isActive}},"Loading..."))}static get watchers(){return{isVideoView:["onVideoViewChange"],buffering:["onActiveChange"],playbackReady:["onActiveChange"]}}};V.style=":host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--vm-spinner-z-index)}.spinner{width:100%;height:100%;display:flex;justify-content:center;align-items:center;opacity:0;visibility:hidden;pointer-events:none;transition:var(--vm-fade-transition)}.spinner.hidden{display:none}.spinner.active{opacity:1;visibility:visible}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.spin{background:transparent;margin:60px auto;font-size:10px;position:relative;text-indent:-9999em;pointer-events:none;border-top:var(--vm-spinner-thickness) solid var(--vm-spinner-fill-color);border-left:var(--vm-spinner-thickness) solid var(--vm-spinner-fill-color);border-right:var(--vm-spinner-thickness) solid var(--vm-spinner-track-color);border-bottom:var(--vm-spinner-thickness) solid var(--vm-spinner-track-color);transform:translateZ(0)}.spin.active{animation:spin var(--vm-spinner-spin-duration) infinite var(--vm-spinner-spin-timing-func)}.spin,.spin::after{border-radius:50%;width:var(--vm-spinner-width);height:var(--vm-spinner-height)}";const R=class{constructor(i){t(this,i),this.isVideoView=!1,this.playsinline=!1,this.isFullscreenActive=!1,a(this),p(this,["isVideoView","playsinline","isFullscreenActive"])}render(){const t=!g||!this.isVideoView||this.playsinline&&!this.isFullscreenActive;return i("div",{class:{ui:!0,hidden:!t,video:this.isVideoView}},t&&i("slot",null))}};R.style=":host{z-index:var(--vm-ui-z-index)}.ui{width:100%;pointer-events:none}.ui.hidden{display:none}.ui.video{position:absolute;top:0;left:0;height:100%}";export{f as vm_captions,x as vm_click_to_play,w as vm_dbl_click_fullscreen,C as vm_default_controls,T as vm_default_settings,z as vm_loading_screen,P as vm_poster,V as vm_spinner,R as vm_ui}