{"ast":null,"code":"var _jsxFileName = \"C:\\\\Smart-Virtual-Classroom\\\\client\\\\src\\\\Components\\\\Chat\\\\Chat.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useRef } from 'react';\nimport styled from 'styled-components';\nimport socket from '../../socket';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Chat = ({\n  display,\n  roomId\n}) => {\n  _s();\n\n  const currentUser = sessionStorage.getItem('user');\n  const [msg, setMsg] = useState([]);\n  const messagesEndRef = useRef(null);\n  const inputRef = useRef();\n  useEffect(() => {\n    socket.on('FE-receive-message', ({\n      msg,\n      sender\n    }) => {\n      setMsg(msgs => [...msgs, {\n        sender,\n        msg\n      }]);\n    });\n  }, []); // Scroll to Bottom of Message List\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [msg]);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n\n  const sendMessage = e => {\n    if (e.key === 'Enter') {\n      const msg = e.target.value;\n\n      if (msg) {\n        socket.emit('BE-send-message', {\n          roomId,\n          msg,\n          sender: currentUser\n        });\n        inputRef.current.value = '';\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(ChatContainer, {\n    className: display ? '' : 'width0',\n    children: [/*#__PURE__*/_jsxDEV(TopHeader, {\n      children: \"Group Chat Room\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ChatArea, {\n      children: /*#__PURE__*/_jsxDEV(MessageList, {\n        children: [msg && msg.map(({\n          sender,\n          msg\n        }, idx) => {\n          if (sender !== currentUser) {\n            return /*#__PURE__*/_jsxDEV(Message, {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: sender\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 45,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: msg\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 46,\n                columnNumber: 21\n              }, this)]\n            }, idx, true, {\n              fileName: _jsxFileName,\n              lineNumber: 44,\n              columnNumber: 19\n            }, this);\n          } else {\n            return /*#__PURE__*/_jsxDEV(UserMessage, {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: sender\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 52,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: msg\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 53,\n                columnNumber: 21\n              }, this)]\n            }, idx, true, {\n              fileName: _jsxFileName,\n              lineNumber: 51,\n              columnNumber: 19\n            }, this);\n          }\n        }), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            float: 'left',\n            clear: 'both'\n          },\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(BottomInput, {\n      ref: inputRef,\n      onKeyUp: sendMessage,\n      placeholder: \"Enter your message\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Chat, \"wUcUGs14ANWYdpj550d5Od2jUA8=\");\n\n_c = Chat;\nconst ChatContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 25%;\n  hieght: 100%;\n  background-color: white;\n  transition: all 0.5s ease;\n  overflow: hidden;\n  color:black;\n`;\n_c2 = ChatContainer;\nconst TopHeader = styled.div`\n  width: 100%;\n  margin-top: 15px;\n  font-weight: 600;\n  font-size: 20px;\n  color: black;\n`;\n_c3 = TopHeader;\nconst ChatArea = styled.div`\n  width: 100%;\n  height: 83%;\n  max-height: 83%;\n  color:black;\n  overflow-x: hidden;\n  overflow-y: auto;\n`;\n_c4 = ChatArea;\nconst MessageList = styled.div`\n  display: flex;\n  width: 100%;\n  flex-direction: column;\n  padding: 15px;\n  color: #454552;\n`;\n_c5 = MessageList;\nconst Message = styled.div`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  font-size: 16px;\n  margin-top: 15px;\n  margin-left: 15px;\n  text-align: left;\n\n  > strong {\n    margin-left: 3px;\n  }\n\n  > p {\n    max-width: 65%;\n    width: auto;\n    padding: 9px;\n    margin-top: 3px;\n    border: 1px solid rgb(78, 161, 211, 0.3);\n    border-radius: 15px;\n    box-shadow: 0px 0px 3px #4ea1d3;\n    font-size: 14px;\n  }\n`;\n_c6 = Message;\nconst UserMessage = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  width: 100%;\n  font-size: 16px;\n  margin-top: 15px;\n  text-align: right;\n\n  > strong {\n    margin-right: 35px;\n  }\n\n  > p {\n    max-width: 65%;\n    width: auto;\n    padding: 9px;\n    margin-top: 3px;\n    margin-right: 30px;\n    border: 1px solid rgb(78, 161, 211, 0.3);\n    border-radius: 15px;\n    background-color: #4ea1d3;\n    color: white;\n    font-size: 14px;\n    text-align: left;\n  }\n`;\n_c7 = UserMessage;\nconst BottomInput = styled.input`\n  bottom: 0;\n  width: 100%;\n  height: 8%;\n  padding: 15px;\n  border-top: 1px solid rgb(69, 69, 82, 0.25);\n  box-sizing: border-box;\n  opacity: 0.7;\n\n  :focus {\n    outline: none;\n  }\n`;\n_c8 = BottomInput;\nexport default Chat;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8;\n\n$RefreshReg$(_c, \"Chat\");\n$RefreshReg$(_c2, \"ChatContainer\");\n$RefreshReg$(_c3, \"TopHeader\");\n$RefreshReg$(_c4, \"ChatArea\");\n$RefreshReg$(_c5, \"MessageList\");\n$RefreshReg$(_c6, \"Message\");\n$RefreshReg$(_c7, \"UserMessage\");\n$RefreshReg$(_c8, \"BottomInput\");","map":{"version":3,"sources":["C:/Smart-Virtual-Classroom/client/src/Components/Chat/Chat.js"],"names":["React","useEffect","useState","useRef","styled","socket","Chat","display","roomId","currentUser","sessionStorage","getItem","msg","setMsg","messagesEndRef","inputRef","on","sender","msgs","scrollToBottom","current","scrollIntoView","behavior","sendMessage","e","key","target","value","emit","map","idx","float","clear","ChatContainer","div","TopHeader","ChatArea","MessageList","Message","UserMessage","BottomInput","input"],"mappings":"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8B,GAAI;AAC7B;AACA;AACA;AACA;AACA;AACA,CANA;MAAMC,S;AAQN,MAAMC,QAAQ,GAAGhC,MAAM,CAAC8B,GAAI;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,CAPA;MAAME,Q;AASN,MAAMC,WAAW,GAAGjC,MAAM,CAAC8B,GAAI;AAC/B;AACA;AACA;AACA;AACA;AACA,CANA;MAAMG,W;AAQN,MAAMC,OAAO,GAAGlC,MAAM,CAAC8B,GAAI;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAxBA;MAAMI,O;AA0BN,MAAMC,WAAW,GAAGnC,MAAM,CAAC8B,GAAI;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CA1BA;MAAMK,W;AA4BN,MAAMC,WAAW,GAAGpC,MAAM,CAACqC,KAAM;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAZA;MAAMD,W;AAcN,eAAelC,IAAf","sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport styled from 'styled-components';\r\nimport socket from '../../socket';\r\n\r\nconst Chat = ({ display, roomId }) => {\r\n  const currentUser = sessionStorage.getItem('user');\r\n  const [msg, setMsg] = useState([]);\r\n  const messagesEndRef = useRef(null);\r\n  const inputRef = useRef();\r\n  \r\n  useEffect(() => {\r\n    socket.on('FE-receive-message', ({ msg, sender }) => {\r\n      setMsg((msgs) => [...msgs, { sender, msg }]);\r\n    });\r\n  }, []);\r\n\r\n  // Scroll to Bottom of Message List\r\n  useEffect(() => {scrollToBottom()}, [msg])\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current.scrollIntoView({ behavior: 'smooth'});\r\n  }\r\n\r\n  const sendMessage = (e) => {\r\n    if (e.key === 'Enter') {\r\n      const msg = e.target.value;\r\n\r\n      if (msg) {\r\n        socket.emit('BE-send-message', { roomId, msg, sender: currentUser });\r\n        inputRef.current.value = '';\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ChatContainer className={display ? '' : 'width0'}>\r\n      <TopHeader>Group Chat Room</TopHeader>\r\n      <ChatArea>\r\n        <MessageList>\r\n          {msg &&\r\n            msg.map(({ sender, msg }, idx) => {\r\n              if (sender !== currentUser) {\r\n                return (\r\n                  <Message key={idx}>\r\n                    <strong>{sender}</strong>\r\n                    <p>{msg}</p>\r\n                  </Message>\r\n                );\r\n              } else {\r\n                return (\r\n                  <UserMessage key={idx}>\r\n                    <strong>{sender}</strong>\r\n                    <p>{msg}</p>\r\n                  </UserMessage>\r\n                );\r\n              }\r\n            })}\r\n            <div style={{float:'left', clear: 'both'}} ref={messagesEndRef} />\r\n        </MessageList>\r\n      </ChatArea>\r\n      <BottomInput\r\n        ref={inputRef}\r\n        onKeyUp={sendMessage}\r\n        placeholder=\"Enter your message\"\r\n      />\r\n    </ChatContainer>\r\n  );\r\n};\r\n\r\nconst ChatContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 25%;\r\n  hieght: 100%;\r\n  background-color: white;\r\n  transition: all 0.5s ease;\r\n  overflow: hidden;\r\n  color:black;\r\n`;\r\n\r\nconst TopHeader = styled.div`\r\n  width: 100%;\r\n  margin-top: 15px;\r\n  font-weight: 600;\r\n  font-size: 20px;\r\n  color: black;\r\n`;\r\n\r\nconst ChatArea = styled.div`\r\n  width: 100%;\r\n  height: 83%;\r\n  max-height: 83%;\r\n  color:black;\r\n  overflow-x: hidden;\r\n  overflow-y: auto;\r\n`;\r\n\r\nconst MessageList = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n  flex-direction: column;\r\n  padding: 15px;\r\n  color: #454552;\r\n`;\r\n\r\nconst Message = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  font-size: 16px;\r\n  margin-top: 15px;\r\n  margin-left: 15px;\r\n  text-align: left;\r\n\r\n  > strong {\r\n    margin-left: 3px;\r\n  }\r\n\r\n  > p {\r\n    max-width: 65%;\r\n    width: auto;\r\n    padding: 9px;\r\n    margin-top: 3px;\r\n    border: 1px solid rgb(78, 161, 211, 0.3);\r\n    border-radius: 15px;\r\n    box-shadow: 0px 0px 3px #4ea1d3;\r\n    font-size: 14px;\r\n  }\r\n`;\r\n\r\nconst UserMessage = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-end;\r\n  width: 100%;\r\n  font-size: 16px;\r\n  margin-top: 15px;\r\n  text-align: right;\r\n\r\n  > strong {\r\n    margin-right: 35px;\r\n  }\r\n\r\n  > p {\r\n    max-width: 65%;\r\n    width: auto;\r\n    padding: 9px;\r\n    margin-top: 3px;\r\n    margin-right: 30px;\r\n    border: 1px solid rgb(78, 161, 211, 0.3);\r\n    border-radius: 15px;\r\n    background-color: #4ea1d3;\r\n    color: white;\r\n    font-size: 14px;\r\n    text-align: left;\r\n  }\r\n`;\r\n\r\nconst BottomInput = styled.input`\r\n  bottom: 0;\r\n  width: 100%;\r\n  height: 8%;\r\n  padding: 15px;\r\n  border-top: 1px solid rgb(69, 69, 82, 0.25);\r\n  box-sizing: border-box;\r\n  opacity: 0.7;\r\n\r\n  :focus {\r\n    outline: none;\r\n  }\r\n`;\r\n\r\nexport default Chat;\r\n"]},"metadata":{},"sourceType":"module"}