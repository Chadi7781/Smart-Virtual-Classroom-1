{"ast":null,"code":"var _jsxFileName = \"C:\\\\Smart-Virtual-Classroom\\\\client\\\\src\\\\Components\\\\coursesAndSeances\\\\FormCourses.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport \"react-dropzone-uploader/dist/styles.css\";\nimport Dropzone from \"react-dropzone-uploader\";\nimport { Button, Dimmer, Dropdown, Form, Header, Loader, Message, Select } from \"semantic-ui-react\";\nimport { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { AddCourses, RetrieveCoursesByIdClass } from \"../../redux/slices/Courses\";\nimport TextareaAutosize from \"react-textarea-autosize\";\nimport { useParams } from \"react-router\";\nimport { isAuth, signout } from \"../../helpers/auth\";\nimport { notificationsApi } from \"../../api/api\";\nimport io from \"socket.io-client\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ENDPOINT = \"https://closer-server.herokuapp.com/\";\n\nfunction FormCourses(props) {\n  _s();\n\n  const socket = io(ENDPOINT);\n  const seances = useSelector(state => state.seance.seance);\n  const {\n    id\n  } = useParams();\n  const [titre, SetTitre] = useState(\"\");\n  const [description, SetDescription] = useState(\"\");\n  const [idSance, SetIdSeance] = useState(2);\n  const [dateCreation, SetDateCreation] = useState(Date.now());\n  const [multiple_resources, SetMultiple_resources] = useState([]);\n  const [formClassName, SetFormClassName] = useState(\"\");\n  const [formSuccessMessage, SetFormSuccessMessage] = useState(\"\");\n  const [formErrorMessage, SetFormErrorMessage] = useState(\"\");\n  const [selectedItem, SetSelectedItem] = useState();\n  const [loader, SetLoader] = useState(false);\n  const CurrentClass = JSON.parse(localStorage.getItem(\"idClass\"));\n  const idClass = CurrentClass._id;\n  const members = [];\n\n  for (let i = 0; i < CurrentClass.classUsers.length; i++) {\n    members.push(CurrentClass.classUsers[i]._id);\n  }\n\n  const SeanceOptions = [{\n    key: Number,\n    text: \"\",\n    value: \"\"\n  }];\n  const dispatch = useDispatch();\n\n  for (let i = 0; i < seances.length; i++) {\n    const option = {\n      key: seances[i]._id,\n      text: seances[i].titre,\n      value: seances[i].titre\n    };\n    SeanceOptions.push(option);\n  }\n\n  const [notif] = useState({\n    Message: \"new Courses was added check your timeline ! !\",\n    Owner: [],\n    Course: {\n      _id: \"\"\n    }\n  });\n\n  const handleChangeSelect = async e => {\n    console.log(e.target.value);\n    await SetSelectedItem(e.target.value);\n    await console.log(selectedItem);\n  };\n\n  const handleTitreChanges = e => {\n    console.log(id);\n    SetTitre(e.target.value);\n  };\n\n  const handleDescriptionChanges = e => {\n    SetDescription(e.target.value);\n  };\n\n  const AddCourse = e => {\n    console.log(members);\n    e.preventDefault();\n\n    const idOwner = isAuth()._id;\n\n    SetLoader(true);\n    const rep = dispatch(AddCourses(selectedItem, titre, description, multiple_resources, idOwner, idClass)).then(response => {\n      SetLoader(false);\n      console.log(response);\n      notif.Owner = members;\n      notif.Course = response.result._id;\n      const res2 = notificationsApi.addNotification(notif);\n      socket.emit(\"add-new-notification\", members);\n      console.log(response);\n      const CurrentClass = JSON.parse(localStorage.getItem(\"idClass\"));\n      console.log(CurrentClass._id);\n      dispatch(RetrieveCoursesByIdClass(CurrentClass._id));\n      console.log(response);\n      SetFormClassName(\"success\");\n      SetFormSuccessMessage(response.msg);\n    }).catch(err => {\n      if (err.response) {\n        if (err.response.data) {\n          SetFormClassName(\"warning\");\n          SetFormErrorMessage(err.response.msg);\n        }\n      } else {\n        SetFormClassName(\"warning\");\n        SetFormErrorMessage(\"Something wen wrong \" + err);\n      }\n    });\n  };\n\n  const handleChangeStatus = ({\n    meta,\n    file\n  }, status) => {\n    console.log(status, meta, file);\n\n    if (status === \"done\") {\n      SetMultiple_resources(multiple_resources.concat(file));\n    }\n\n    if (status === \"removed\") {\n      let multiple_resource = multiple_resources.slice();\n      multiple_resource = multiple_resources.filter(u => {\n        return u !== file;\n      });\n      SetMultiple_resources(multiple_resource);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      className: formClassName,\n      onSubmit: AddCourse,\n      children: [/*#__PURE__*/_jsxDEV(Form.Input, {\n        label: \"Titre\",\n        type: \"text\",\n        placeholder: \"Seance 1\",\n        name: \"Titre\",\n        maxLength: \"40\",\n        required: true,\n        value: titre,\n        onChange: handleTitreChanges\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n        control: TextareaAutosize,\n        label: \"Description\",\n        type: \"text\",\n        placeholder: \"In this workshop we will learn ...\",\n        name: \"Description\",\n        required: true,\n        value: description,\n        onChange: handleDescriptionChanges\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Header, {\n        as: \"h5\",\n        icon: \"file alternate outline\",\n        content: \"Select Seance\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: selectedItem,\n        onChange: handleChangeSelect,\n        children: SeanceOptions.map((c, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: c.key,\n          children: c.text\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Header, {\n        as: \"h5\",\n        icon: \"images outline\",\n        content: \"Select Files\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Dropzone, {\n        styles: {\n          dropzone: {\n            minHeight: 120,\n            maxHeight: 250\n          }\n        },\n        onChangeStatus: handleChangeStatus\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 9\n      }, this), loader ? /*#__PURE__*/_jsxDEV(Dimmer, {\n        active: true,\n        inverted: true,\n        children: /*#__PURE__*/_jsxDEV(Loader, {\n          inline: \"centered\",\n          children: \"Preparing Files ... please wait !\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Message, {\n          success: true,\n          color: \"green\",\n          header: \"Nice one! \\uD83D\\uDCD2 \\uD83D\\uDCD5 \\uD83D\\uDCDA \\uD83D\\uDCD6\",\n          content: formSuccessMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Message, {\n          warning: true,\n          color: \"yellow\",\n          header: \"Woah! \\uD83D\\uDE31 \\uD83D\\uDE28\",\n          content: formErrorMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        color: \"black\",\n        floated: \"right\",\n        children: \"Add\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 141,\n    columnNumber: 5\n  }, this);\n}\n\n_s(FormCourses, \"IsjfhGr9tpAXJvYZKlVytDeP43A=\", false, function () {\n  return [useSelector, useParams, useDispatch];\n});\n\n_c = FormCourses;\nexport default FormCourses;\n\nvar _c;\n\n$RefreshReg$(_c, \"FormCourses\");","map":{"version":3,"sources":["C:/Smart-Virtual-Classroom/client/src/Components/coursesAndSeances/FormCourses.js"],"names":["React","Dropzone","Button","Dimmer","Dropdown","Form","Header","Loader","Message","Select","useState","useEffect","useDispatch","useSelector","AddCourses","RetrieveCoursesByIdClass","TextareaAutosize","useParams","isAuth","signout","notificationsApi","io","ENDPOINT","FormCourses","props","socket","seances","state","seance","id","titre","SetTitre","description","SetDescription","idSance","SetIdSeance","dateCreation","SetDateCreation","Date","now","multiple_resources","SetMultiple_resources","formClassName","SetFormClassName","formSuccessMessage","SetFormSuccessMessage","formErrorMessage","SetFormErrorMessage","selectedItem","SetSelectedItem","loader","SetLoader","CurrentClass","JSON","parse","localStorage","getItem","idClass","_id","members","i","classUsers","length","push","SeanceOptions","key","Number","text","value","dispatch","option","notif","Owner","Course","handleChangeSelect","e","console","log","target","handleTitreChanges","handleDescriptionChanges","AddCourse","preventDefault","idOwner","rep","then","response","result","res2","addNotification","emit","msg","catch","err","data","handleChangeStatus","meta","file","status","concat","multiple_resource","slice","filter","u","map","c","index","dropzone","minHeight","maxHeight"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAO,yCAAP;AAEA,OAAOC,QAAP,MAAqB,yBAArB;AACA,SACEC,MADF,EAEEC,MAFF,EAGEC,QAHF,EAIEC,IAJF,EAKEC,MALF,EAMEC,MANF,EAOEC,OAPF,EAQEC,MARF,QASO,mBATP;AAUA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SACEC,UADF,EAEEC,wBAFF,QAGO,4BAHP;AAIA,OAAOC,gBAAP,MAA6B,yBAA7B;AAEA,SAASC,SAAT,QAA0B,cAA1B;AACA,SAASC,MAAT,EAAiBC,OAAjB,QAAgC,oBAAhC;AACA,SAASC,gBAAT,QAAiC,eAAjC;AACA,OAAOC,EAAP,MAAe,kBAAf;;;AACA,MAAMC,QAAQ,GAAG,sCAAjB;;AAEA,SAASC,WAAT,CAAqBC,KAArB,EAA4B;AAAA;;AAC1B,QAAMC,MAAM,GAAGJ,EAAE,CAACC,QAAD,CAAjB;AACA,QAAMI,OAAO,GAAGb,WAAW,CAAEc,KAAD,IAAWA,KAAK,CAACC,MAAN,CAAaA,MAAzB,CAA3B;AACA,QAAM;AAAEC,IAAAA;AAAF,MAASZ,SAAS,EAAxB;AACA,QAAM,CAACa,KAAD,EAAQC,QAAR,IAAoBrB,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACsB,WAAD,EAAcC,cAAd,IAAgCvB,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACwB,OAAD,EAAUC,WAAV,IAAyBzB,QAAQ,CAAC,CAAD,CAAvC;AACA,QAAM,CAAC0B,YAAD,EAAeC,eAAf,IAAkC3B,QAAQ,CAAC4B,IAAI,CAACC,GAAL,EAAD,CAAhD;AACA,QAAM,CAACC,kBAAD,EAAqBC,qBAArB,IAA8C/B,QAAQ,CAAC,EAAD,CAA5D;AACA,QAAM,CAACgC,aAAD,EAAgBC,gBAAhB,IAAoCjC,QAAQ,CAAC,EAAD,CAAlD;AACA,QAAM,CAACkC,kBAAD,EAAqBC,qBAArB,IAA8CnC,QAAQ,CAAC,EAAD,CAA5D;AACA,QAAM,CAACoC,gBAAD,EAAmBC,mBAAnB,IAA0CrC,QAAQ,CAAC,EAAD,CAAxD;AACA,QAAM,CAACsC,YAAD,EAAeC,eAAf,IAAkCvC,QAAQ,EAAhD;AACA,QAAM,CAACwC,MAAD,EAASC,SAAT,IAAsBzC,QAAQ,CAAC,KAAD,CAApC;AACA,QAAM0C,YAAY,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,CAArB;AACA,QAAMC,OAAO,GAAGL,YAAY,CAACM,GAA7B;AACA,QAAMC,OAAO,GAAG,EAAhB;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGR,YAAY,CAACS,UAAb,CAAwBC,MAA5C,EAAoDF,CAAC,EAArD,EAAyD;AACvDD,IAAAA,OAAO,CAACI,IAAR,CAAaX,YAAY,CAACS,UAAb,CAAwBD,CAAxB,EAA2BF,GAAxC;AACD;;AACD,QAAMM,aAAa,GAAG,CAAC;AAAEC,IAAAA,GAAG,EAAEC,MAAP;AAAeC,IAAAA,IAAI,EAAE,EAArB;AAAyBC,IAAAA,KAAK,EAAE;AAAhC,GAAD,CAAtB;AACA,QAAMC,QAAQ,GAAGzD,WAAW,EAA5B;;AACA,OAAK,IAAIgD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGlC,OAAO,CAACoC,MAA5B,EAAoCF,CAAC,EAArC,EAAyC;AACvC,UAAMU,MAAM,GAAG;AACbL,MAAAA,GAAG,EAAEvC,OAAO,CAACkC,CAAD,CAAP,CAAWF,GADH;AAEbS,MAAAA,IAAI,EAAEzC,OAAO,CAACkC,CAAD,CAAP,CAAW9B,KAFJ;AAGbsC,MAAAA,KAAK,EAAE1C,OAAO,CAACkC,CAAD,CAAP,CAAW9B;AAHL,KAAf;AAMAkC,IAAAA,aAAa,CAACD,IAAd,CAAmBO,MAAnB;AACD;;AAED,QAAM,CAACC,KAAD,IAAU7D,QAAQ,CAAC;AACvBF,IAAAA,OAAO,EAAE,+CADc;AAEvBgE,IAAAA,KAAK,EAAE,EAFgB;AAGvBC,IAAAA,MAAM,EAAE;AAAEf,MAAAA,GAAG,EAAE;AAAP;AAHe,GAAD,CAAxB;;AAMA,QAAMgB,kBAAkB,GAAG,MAAOC,CAAP,IAAa;AACtCC,IAAAA,OAAO,CAACC,GAAR,CAAYF,CAAC,CAACG,MAAF,CAASV,KAArB;AACA,UAAMnB,eAAe,CAAC0B,CAAC,CAACG,MAAF,CAASV,KAAV,CAArB;AACA,UAAMQ,OAAO,CAACC,GAAR,CAAY7B,YAAZ,CAAN;AACD,GAJD;;AAKA,QAAM+B,kBAAkB,GAAIJ,CAAD,IAAO;AAChCC,IAAAA,OAAO,CAACC,GAAR,CAAYhD,EAAZ;AACAE,IAAAA,QAAQ,CAAC4C,CAAC,CAACG,MAAF,CAASV,KAAV,CAAR;AACD,GAHD;;AAIA,QAAMY,wBAAwB,GAAIL,CAAD,IAAO;AACtC1C,IAAAA,cAAc,CAAC0C,CAAC,CAACG,MAAF,CAASV,KAAV,CAAd;AACD,GAFD;;AAGA,QAAMa,SAAS,GAAIN,CAAD,IAAO;AACvBC,IAAAA,OAAO,CAACC,GAAR,CAAYlB,OAAZ;AACAgB,IAAAA,CAAC,CAACO,cAAF;;AACA,UAAMC,OAAO,GAAGjE,MAAM,GAAGwC,GAAzB;;AACAP,IAAAA,SAAS,CAAC,IAAD,CAAT;AACA,UAAMiC,GAAG,GAAGf,QAAQ,CAClBvD,UAAU,CACRkC,YADQ,EAERlB,KAFQ,EAGRE,WAHQ,EAIRQ,kBAJQ,EAKR2C,OALQ,EAMR1B,OANQ,CADQ,CAAR,CAUT4B,IAVS,CAUHC,QAAD,IAAc;AAClBnC,MAAAA,SAAS,CAAC,KAAD,CAAT;AACAyB,MAAAA,OAAO,CAACC,GAAR,CAAYS,QAAZ;AACAf,MAAAA,KAAK,CAACC,KAAN,GAAcb,OAAd;AACAY,MAAAA,KAAK,CAACE,MAAN,GAAea,QAAQ,CAACC,MAAT,CAAgB7B,GAA/B;AACA,YAAM8B,IAAI,GAAGpE,gBAAgB,CAACqE,eAAjB,CAAiClB,KAAjC,CAAb;AACA9C,MAAAA,MAAM,CAACiE,IAAP,CAAY,sBAAZ,EAAoC/B,OAApC;AAEAiB,MAAAA,OAAO,CAACC,GAAR,CAAYS,QAAZ;AAEA,YAAMlC,YAAY,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,CAArB;AACAoB,MAAAA,OAAO,CAACC,GAAR,CAAYzB,YAAY,CAACM,GAAzB;AACAW,MAAAA,QAAQ,CAACtD,wBAAwB,CAACqC,YAAY,CAACM,GAAd,CAAzB,CAAR;AACAkB,MAAAA,OAAO,CAACC,GAAR,CAAYS,QAAZ;AACA3C,MAAAA,gBAAgB,CAAC,SAAD,CAAhB;AACAE,MAAAA,qBAAqB,CAACyC,QAAQ,CAACK,GAAV,CAArB;AACD,KA1BS,EA2BTC,KA3BS,CA2BFC,GAAD,IAAS;AACd,UAAIA,GAAG,CAACP,QAAR,EAAkB;AAChB,YAAIO,GAAG,CAACP,QAAJ,CAAaQ,IAAjB,EAAuB;AACrBnD,UAAAA,gBAAgB,CAAC,SAAD,CAAhB;AACAI,UAAAA,mBAAmB,CAAC8C,GAAG,CAACP,QAAJ,CAAaK,GAAd,CAAnB;AACD;AACF,OALD,MAKO;AACLhD,QAAAA,gBAAgB,CAAC,SAAD,CAAhB;AACAI,QAAAA,mBAAmB,CAAC,yBAAyB8C,GAA1B,CAAnB;AACD;AACF,KArCS,CAAZ;AAsCD,GA3CD;;AA6CA,QAAME,kBAAkB,GAAG,CAAC;AAAEC,IAAAA,IAAF;AAAQC,IAAAA;AAAR,GAAD,EAAiBC,MAAjB,KAA4B;AACrDtB,IAAAA,OAAO,CAACC,GAAR,CAAYqB,MAAZ,EAAoBF,IAApB,EAA0BC,IAA1B;;AAEA,QAAIC,MAAM,KAAK,MAAf,EAAuB;AACrBzD,MAAAA,qBAAqB,CAACD,kBAAkB,CAAC2D,MAAnB,CAA0BF,IAA1B,CAAD,CAArB;AACD;;AACD,QAAIC,MAAM,KAAK,SAAf,EAA0B;AACxB,UAAIE,iBAAiB,GAAG5D,kBAAkB,CAAC6D,KAAnB,EAAxB;AACAD,MAAAA,iBAAiB,GAAG5D,kBAAkB,CAAC8D,MAAnB,CAA2BC,CAAD,IAAO;AACnD,eAAOA,CAAC,KAAKN,IAAb;AACD,OAFmB,CAApB;AAGAxD,MAAAA,qBAAqB,CAAC2D,iBAAD,CAArB;AACD;AACF,GAbD;;AAeA,sBACE;AAAA,2BACE,QAAC,IAAD;AAAM,MAAA,SAAS,EAAE1D,aAAjB;AAAgC,MAAA,QAAQ,EAAEuC,SAA1C;AAAA,8BACE,QAAC,IAAD,CAAM,KAAN;AACE,QAAA,KAAK,EAAC,OADR;AAEE,QAAA,IAAI,EAAC,MAFP;AAGE,QAAA,WAAW,EAAE,UAHf;AAIE,QAAA,IAAI,EAAC,OAJP;AAKE,QAAA,SAAS,EAAC,IALZ;AAME,QAAA,QAAQ,MANV;AAOE,QAAA,KAAK,EAAEnD,KAPT;AAQE,QAAA,QAAQ,EAAEiD;AARZ;AAAA;AAAA;AAAA;AAAA,cADF,eAWE,QAAC,IAAD,CAAM,KAAN;AACE,QAAA,OAAO,EAAE/D,gBADX;AAEE,QAAA,KAAK,EAAC,aAFR;AAGE,QAAA,IAAI,EAAC,MAHP;AAIE,QAAA,WAAW,EAAC,oCAJd;AAKE,QAAA,IAAI,EAAC,aALP;AAME,QAAA,QAAQ,MANV;AAOE,QAAA,KAAK,EAAEgB,WAPT;AAQE,QAAA,QAAQ,EAAEgD;AARZ;AAAA;AAAA;AAAA;AAAA,cAXF,eAqBE,QAAC,MAAD;AAAQ,QAAA,EAAE,EAAC,IAAX;AAAgB,QAAA,IAAI,EAAC,wBAArB;AAA8C,QAAA,OAAO,EAAC;AAAtD;AAAA;AAAA;AAAA;AAAA,cArBF,eAuBE;AAAQ,QAAA,KAAK,EAAEhC,YAAf;AAA6B,QAAA,QAAQ,EAAE0B,kBAAvC;AAAA,kBACGV,aAAa,CAACwC,GAAd,CAAkB,CAACC,CAAD,EAAIC,KAAJ,kBACjB;AAAoB,UAAA,KAAK,EAAED,CAAC,CAACxC,GAA7B;AAAA,oBACGwC,CAAC,CAACtC;AADL,WAAauC,KAAb;AAAA;AAAA;AAAA;AAAA,gBADD;AADH;AAAA;AAAA;AAAA;AAAA,cAvBF,eA+BE,QAAC,MAAD;AAAQ,QAAA,EAAE,EAAC,IAAX;AAAgB,QAAA,IAAI,EAAC,gBAArB;AAAsC,QAAA,OAAO,EAAC;AAA9C;AAAA;AAAA;AAAA;AAAA,cA/BF,eAiCE,QAAC,QAAD;AACE,QAAA,MAAM,EAAE;AAAEC,UAAAA,QAAQ,EAAE;AAAEC,YAAAA,SAAS,EAAE,GAAb;AAAkBC,YAAAA,SAAS,EAAE;AAA7B;AAAZ,SADV;AAEE,QAAA,cAAc,EAAEd;AAFlB;AAAA;AAAA;AAAA;AAAA,cAjCF,eAqCE;AAAA;AAAA;AAAA;AAAA,cArCF,EAsCG7C,MAAM,gBACL,QAAC,MAAD;AAAQ,QAAA,MAAM,MAAd;AAAe,QAAA,QAAQ,MAAvB;AAAA,+BACE,QAAC,MAAD;AAAQ,UAAA,MAAM,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADK,gBAKL;AAAA,gCACE,QAAC,OAAD;AACE,UAAA,OAAO,MADT;AAEE,UAAA,KAAK,EAAC,OAFR;AAGE,UAAA,MAAM,EAAC,+DAHT;AAIE,UAAA,OAAO,EAAEN;AAJX;AAAA;AAAA;AAAA;AAAA,gBADF,eAOE,QAAC,OAAD;AACE,UAAA,OAAO,MADT;AAEE,UAAA,KAAK,EAAC,QAFR;AAGE,UAAA,MAAM,EAAC,iCAHT;AAIE,UAAA,OAAO,EAAEE;AAJX;AAAA;AAAA;AAAA;AAAA,gBAPF;AAAA,sBA3CJ,eA2DE;AAAA;AAAA;AAAA;AAAA,cA3DF,eA4DE,QAAC,MAAD;AAAQ,QAAA,KAAK,EAAC,OAAd;AAAsB,QAAA,OAAO,EAAC,OAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cA5DF,eA+DE;AAAA;AAAA;AAAA;AAAA,cA/DF,eAgEE;AAAA;AAAA;AAAA;AAAA,cAhEF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAsED;;GApLQvB,W;UAESV,W,EACDI,S,EAkBEL,W;;;KArBVW,W;AAsLT,eAAeA,WAAf","sourcesContent":["import React from \"react\";\r\n\r\nimport \"react-dropzone-uploader/dist/styles.css\";\r\n\r\nimport Dropzone from \"react-dropzone-uploader\";\r\nimport {\r\n  Button,\r\n  Dimmer,\r\n  Dropdown,\r\n  Form,\r\n  Header,\r\n  Loader,\r\n  Message,\r\n  Select,\r\n} from \"semantic-ui-react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  AddCourses,\r\n  RetrieveCoursesByIdClass,\r\n} from \"../../redux/slices/Courses\";\r\nimport TextareaAutosize from \"react-textarea-autosize\";\r\n\r\nimport { useParams } from \"react-router\";\r\nimport { isAuth, signout } from \"../../helpers/auth\";\r\nimport { notificationsApi } from \"../../api/api\";\r\nimport io from \"socket.io-client\";\r\nconst ENDPOINT = \"https://closer-server.herokuapp.com/\";\r\n\r\nfunction FormCourses(props) {\r\n  const socket = io(ENDPOINT);\r\n  const seances = useSelector((state) => state.seance.seance);\r\n  const { id } = useParams();\r\n  const [titre, SetTitre] = useState(\"\");\r\n  const [description, SetDescription] = useState(\"\");\r\n  const [idSance, SetIdSeance] = useState(2);\r\n  const [dateCreation, SetDateCreation] = useState(Date.now());\r\n  const [multiple_resources, SetMultiple_resources] = useState([]);\r\n  const [formClassName, SetFormClassName] = useState(\"\");\r\n  const [formSuccessMessage, SetFormSuccessMessage] = useState(\"\");\r\n  const [formErrorMessage, SetFormErrorMessage] = useState(\"\");\r\n  const [selectedItem, SetSelectedItem] = useState();\r\n  const [loader, SetLoader] = useState(false);\r\n  const CurrentClass = JSON.parse(localStorage.getItem(\"idClass\"));\r\n  const idClass = CurrentClass._id;\r\n  const members = [];\r\n  for (let i = 0; i < CurrentClass.classUsers.length; i++) {\r\n    members.push(CurrentClass.classUsers[i]._id);\r\n  }\r\n  const SeanceOptions = [{ key: Number, text: \"\", value: \"\" }];\r\n  const dispatch = useDispatch();\r\n  for (let i = 0; i < seances.length; i++) {\r\n    const option = {\r\n      key: seances[i]._id,\r\n      text: seances[i].titre,\r\n      value: seances[i].titre,\r\n    };\r\n\r\n    SeanceOptions.push(option);\r\n  }\r\n\r\n  const [notif] = useState({\r\n    Message: \"new Courses was added check your timeline ! !\",\r\n    Owner: [],\r\n    Course: { _id: \"\" },\r\n  });\r\n\r\n  const handleChangeSelect = async (e) => {\r\n    console.log(e.target.value);\r\n    await SetSelectedItem(e.target.value);\r\n    await console.log(selectedItem);\r\n  };\r\n  const handleTitreChanges = (e) => {\r\n    console.log(id);\r\n    SetTitre(e.target.value);\r\n  };\r\n  const handleDescriptionChanges = (e) => {\r\n    SetDescription(e.target.value);\r\n  };\r\n  const AddCourse = (e) => {\r\n    console.log(members);\r\n    e.preventDefault();\r\n    const idOwner = isAuth()._id;\r\n    SetLoader(true);\r\n    const rep = dispatch(\r\n      AddCourses(\r\n        selectedItem,\r\n        titre,\r\n        description,\r\n        multiple_resources,\r\n        idOwner,\r\n        idClass\r\n      )\r\n    )\r\n      .then((response) => {\r\n        SetLoader(false);\r\n        console.log(response);\r\n        notif.Owner = members;\r\n        notif.Course = response.result._id;\r\n        const res2 = notificationsApi.addNotification(notif);\r\n        socket.emit(\"add-new-notification\", members);\r\n\r\n        console.log(response);\r\n\r\n        const CurrentClass = JSON.parse(localStorage.getItem(\"idClass\"));\r\n        console.log(CurrentClass._id);\r\n        dispatch(RetrieveCoursesByIdClass(CurrentClass._id));\r\n        console.log(response);\r\n        SetFormClassName(\"success\");\r\n        SetFormSuccessMessage(response.msg);\r\n      })\r\n      .catch((err) => {\r\n        if (err.response) {\r\n          if (err.response.data) {\r\n            SetFormClassName(\"warning\");\r\n            SetFormErrorMessage(err.response.msg);\r\n          }\r\n        } else {\r\n          SetFormClassName(\"warning\");\r\n          SetFormErrorMessage(\"Something wen wrong \" + err);\r\n        }\r\n      });\r\n  };\r\n\r\n  const handleChangeStatus = ({ meta, file }, status) => {\r\n    console.log(status, meta, file);\r\n\r\n    if (status === \"done\") {\r\n      SetMultiple_resources(multiple_resources.concat(file));\r\n    }\r\n    if (status === \"removed\") {\r\n      let multiple_resource = multiple_resources.slice();\r\n      multiple_resource = multiple_resources.filter((u) => {\r\n        return u !== file;\r\n      });\r\n      SetMultiple_resources(multiple_resource);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Form className={formClassName} onSubmit={AddCourse}>\r\n        <Form.Input\r\n          label=\"Titre\"\r\n          type=\"text\"\r\n          placeholder={\"Seance 1\"}\r\n          name=\"Titre\"\r\n          maxLength=\"40\"\r\n          required\r\n          value={titre}\r\n          onChange={handleTitreChanges}\r\n        />\r\n        <Form.Field\r\n          control={TextareaAutosize}\r\n          label=\"Description\"\r\n          type=\"text\"\r\n          placeholder=\"In this workshop we will learn ...\"\r\n          name=\"Description\"\r\n          required\r\n          value={description}\r\n          onChange={handleDescriptionChanges}\r\n        />\r\n        <Header as=\"h5\" icon=\"file alternate outline\" content=\"Select Seance\" />\r\n\r\n        <select value={selectedItem} onChange={handleChangeSelect}>\r\n          {SeanceOptions.map((c, index) => (\r\n            <option key={index} value={c.key}>\r\n              {c.text}\r\n            </option>\r\n          ))}\r\n        </select>\r\n\r\n        <Header as=\"h5\" icon=\"images outline\" content=\"Select Files\" />\r\n\r\n        <Dropzone\r\n          styles={{ dropzone: { minHeight: 120, maxHeight: 250 } }}\r\n          onChangeStatus={handleChangeStatus}\r\n        />\r\n        <br />\r\n        {loader ? (\r\n          <Dimmer active inverted>\r\n            <Loader inline=\"centered\">Preparing Files ... please wait !</Loader>\r\n          </Dimmer>\r\n        ) : (\r\n          <>\r\n            <Message\r\n              success\r\n              color=\"green\"\r\n              header=\"Nice one! 📒 📕 📚 📖\"\r\n              content={formSuccessMessage}\r\n            />\r\n            <Message\r\n              warning\r\n              color=\"yellow\"\r\n              header=\"Woah! 😱 😨\"\r\n              content={formErrorMessage}\r\n            />\r\n          </>\r\n        )}\r\n\r\n        <br />\r\n        <Button color=\"black\" floated=\"right\">\r\n          Add\r\n        </Button>\r\n        <br />\r\n        <br />\r\n      </Form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FormCourses;\r\n"]},"metadata":{},"sourceType":"module"}