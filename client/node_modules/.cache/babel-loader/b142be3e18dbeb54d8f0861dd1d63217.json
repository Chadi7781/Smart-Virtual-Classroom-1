{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nexport const getNbrTasksRemis = createAsyncThunk(\"Task/getNbrTasksRemis\", async id => {\n  const {\n    data\n  } = await axios.get(`http://localhost:5000/task/StatTaskRemis/${id}`);\n  return data;\n});\nexport const getNbrTasksMissing = createAsyncThunk(\"Task/getNbrTasksMissing\", async id => {\n  const {\n    data\n  } = await axios.get(`http://localhost:5000/task/StatTaskMissing/${id}`);\n  return data;\n});\nexport const getTaskByTeacher = createAsyncThunk(\"Task/getTaskByTeacher\", async taskDetail => {\n  console.log(taskDetail);\n  const {\n    data\n  } = await axios.get(`http://localhost:5000/task/teacher?idUser=${taskDetail.idUser}&idClass=${taskDetail.idClass}`);\n  return data;\n});\nexport const getDetailTask = createAsyncThunk(\"Task/getDetailTasks\", async id => {\n  const {\n    data\n  } = await axios.get(`http://localhost:5000/task/DetailTask/${id}`);\n  return data;\n});\nexport const getTasks = createAsyncThunk(\"Task/getTasks\", async () => {\n  const {\n    data\n  } = await axios.get(\"http://localhost:5000/task\");\n  return data;\n});\nexport const assignTask = createAsyncThunk(\"Task/assignTask\", async task => {\n  const {\n    response\n  } = await axios.post(\"http://localhost:5000/task/assign\", task);\n  return response.data;\n});\nexport const postTasks = createAsyncThunk(\"Task/postTask\", async task => {\n  const {\n    response\n  } = await axios.post(\"http://localhost:5000/task\", task);\n  return response.data;\n});\nexport const assignAfterSave = createAsyncThunk(\"Task/assignAfterSave\", async task => {\n  console.log(task);\n  const promise = await axios.post(`http://localhost:5000/task/assignAfterSave/`, task).then(response => {\n    const data = response.data;\n    return data;\n  });\n  const data = await promise;\n  return data;\n});\nexport const updateTaskStatus = createAsyncThunk(\"Task/updateTaskStatus\", async task => {\n  const {\n    response\n  } = await axios.put(`http://localhost:5000/task/taskStatus/${task._id}`, task);\n  return response;\n});\nexport const updateTask = createAsyncThunk(\"Task/UpdateTask\", async task => {\n  // console.log(task)\n  const promise = await axios.put(`http://localhost:5000/task/${task._id}`, task).then(response => {\n    const data = response.data;\n    console.log(data);\n    return data;\n  });\n  const data = await promise;\n  return data;\n});\nexport const deleteTask = createAsyncThunk(\"Task/deleteTask\", async id => {\n  const promise = await axios.delete(`http://localhost:5000/task/deleteTask/${id}`).then(response => {\n    const data = response.data;\n    return data;\n  });\n  const data = await promise;\n  return data;\n});\nexport const taskSlice = createSlice({\n  name: \"Task\",\n  initialState: {\n    tasks: [],\n    nbrRemis: 0,\n    nbrMissing: 0,\n    status: null\n  },\n  extraReducers: {\n    [getTasks.pending]: (state, action) => {\n      state.status = \"loading\";\n    },\n    [getTasks.fulfilled]: (state, {\n      payload\n    }) => {\n      state.tasks = payload;\n      state.status = \"success\";\n    },\n    [UpdateResources.fulfilled]: (state, action) => {\n      state.files.push(action.payload);\n    },\n    [getTasks.rejected]: (state, action) => {\n      state.status = \"failed\";\n    },\n    [getTaskByTeacher.pending]: (state, action) => {\n      state.status = \"loading\";\n    },\n    [getTaskByTeacher.fulfilled]: (state, action) => {\n      state.tasks = action.payload;\n      state.status = \"success\";\n    },\n    [getTaskByTeacher.rejected]: (state, action) => {\n      state.status = \"failed\";\n    },\n    [getDetailTask.pending]: (state, action) => {\n      state.status = \"loading\";\n    },\n    [getDetailTask.fulfilled]: (state, {\n      payload\n    }) => {\n      state.tasks = payload;\n      state.status = \"success\";\n    },\n    [getDetailTask.rejected]: (state, action) => {\n      state.status = \"failed\";\n    },\n    postTasks: (state, action) => {\n      state.tasks.push(action.payload);\n    },\n    [deleteTask.pending]: (state, action) => {\n      state.status = \"loading\";\n    },\n    [deleteTask.fulfilled]: (state, action) => {\n      state.tasks = state.tasks.filter(u => {\n        return u._id !== action.payload._id;\n      });\n      state.status = \"success\";\n    },\n    [deleteTask.rejected]: (state, action) => {\n      state.status = \"failed\";\n    },\n    assignTask: (state, action) => {\n      state.tasks.push(action.payload);\n    },\n    [updateTask.pending]: (state, action) => {\n      state.status = \"loading\";\n    },\n    [updateTask.fulfilled]: (state, action) => {\n      const index = state.tasks.findIndex(item => item._id === action.payload._id);\n\n      if (index !== -1) {\n        state.tasks[index] = action.payload;\n        state.status = \"success\";\n      }\n    },\n    [updateTask.rejected]: (state, action) => {\n      state.status = \"failed\";\n    },\n    [updateTaskStatus.pending]: (state, action) => {\n      state.status = \"loading\";\n    },\n    [updateTaskStatus.fulfilled]: (state, {\n      payload\n    }) => {\n      state.tasks = payload;\n    },\n    [updateTaskStatus.rejected]: (state, action) => {\n      state.status = \"failed\";\n    },\n    [getNbrTasksRemis.pending]: (state, action) => {\n      state.status = \"loading\";\n    },\n    [getNbrTasksRemis.fulfilled]: (state, action) => {\n      if (action.payload.length > 0) state.nbrRemis = action.payload[0].count;\n    },\n    [getNbrTasksRemis.rejected]: (state, action) => {\n      state.status = \"failed\";\n    },\n    [getNbrTasksMissing.pending]: (state, action) => {\n      state.status = \"loading\";\n    },\n    [getNbrTasksMissing.fulfilled]: (state, action) => {\n      if (action.payload.length > 0) state.nbrMissing = action.payload[0].count;\n    },\n    [getNbrTasksMissing.rejected]: (state, action) => {\n      state.status = \"failed\";\n    },\n    [assignAfterSave.pending]: (state, action) => {\n      state.status = \"loading\";\n    },\n    [assignAfterSave.fulfilled]: (state, action) => {\n      const payload = action.payload;\n      const index = state.tasks.findIndex(item => item._id === payload._id);\n\n      if (index !== -1) {\n        state.tasks[index] = payload;\n        state.status = \"success\";\n      }\n    },\n    [assignAfterSave.rejected]: (state, action) => {\n      state.status = \"failed\";\n    }\n  }\n});\nexport default taskSlice.reducer;","map":{"version":3,"sources":["C:/Smart-Virtual-Classroom/client/src/redux/slices/Task.js"],"names":["createAsyncThunk","createSlice","axios","getNbrTasksRemis","id","data","get","getNbrTasksMissing","getTaskByTeacher","taskDetail","console","log","idUser","idClass","getDetailTask","getTasks","assignTask","task","response","post","postTasks","assignAfterSave","promise","then","updateTaskStatus","put","_id","updateTask","deleteTask","delete","taskSlice","name","initialState","tasks","nbrRemis","nbrMissing","status","extraReducers","pending","state","action","fulfilled","payload","UpdateResources","files","push","rejected","filter","u","index","findIndex","item","length","count","reducer"],"mappings":"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","sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\n\r\n\r\n\r\nexport const getNbrTasksRemis = createAsyncThunk(\r\n  \"Task/getNbrTasksRemis\",\r\n  async (id) => {\r\n    const { data } = await axios.get(\r\n      `http://localhost:5000/task/StatTaskRemis/${id}`\r\n    );\r\n\r\n    return data;\r\n  }\r\n);\r\nexport const getNbrTasksMissing = createAsyncThunk(\r\n  \"Task/getNbrTasksMissing\",\r\n  async (id) => {\r\n    const { data } = await axios.get(\r\n      `http://localhost:5000/task/StatTaskMissing/${id}`\r\n    );\r\n\r\n    return data;\r\n  }\r\n);\r\nexport const getTaskByTeacher = createAsyncThunk(\r\n  \"Task/getTaskByTeacher\",\r\n  async (taskDetail) => {\r\n    console.log(taskDetail);\r\n    const { data } = await axios.get(\r\n      `http://localhost:5000/task/teacher?idUser=${taskDetail.idUser}&idClass=${taskDetail.idClass}`,\r\n    );\r\n\r\n    return data;\r\n  }\r\n);\r\n\r\nexport const getDetailTask = createAsyncThunk(\r\n  \"Task/getDetailTasks\",\r\n  async (id) => {\r\n    const { data } = await axios.get(\r\n      `http://localhost:5000/task/DetailTask/${id}`\r\n    );\r\n\r\n    return data;\r\n  }\r\n);\r\n\r\nexport const getTasks = createAsyncThunk(\"Task/getTasks\", async () => {\r\n  const { data } = await axios.get(\"http://localhost:5000/task\");\r\n\r\n  return data;\r\n});\r\nexport const assignTask = createAsyncThunk(\"Task/assignTask\", async (task) => {\r\n  const { response } = await axios.post(\r\n    \"http://localhost:5000/task/assign\",\r\n    task\r\n  );\r\n\r\n  return response.data;\r\n});\r\n\r\nexport const postTasks = createAsyncThunk(\"Task/postTask\", async (task) => {\r\n  const { response } = await axios.post(\r\n    \"http://localhost:5000/task\",\r\n    task\r\n  );\r\n\r\n  return response.data;\r\n});\r\n\r\n\r\n\r\nexport const assignAfterSave = createAsyncThunk(\r\n  \"Task/assignAfterSave\",\r\n  async (task) => {\r\n    console.log(task);\r\n    const promise = await axios.post(\r\n      `http://localhost:5000/task/assignAfterSave/`,\r\n      task\r\n    ).then((response) => {\r\n      const data = response.data;\r\n      return data;\r\n    });\r\n  \r\n  const data = await promise;\r\n  return data;\r\n  }\r\n);\r\n\r\nexport const updateTaskStatus = createAsyncThunk(\r\n  \"Task/updateTaskStatus\",\r\n  async (task) => {\r\n    const { response } = await axios.put(\r\n      `http://localhost:5000/task/taskStatus/${task._id}`,\r\n      task\r\n    );\r\n\r\n    return response;\r\n  }\r\n);\r\nexport const updateTask = createAsyncThunk(\"Task/UpdateTask\", async (task) => {\r\n  // console.log(task)\r\n  const promise = await axios.put(\r\n    `http://localhost:5000/task/${task._id}`,\r\n    task\r\n  ).then((response) => {\r\n    const data = response.data;\r\n    console.log(data);\r\n    return data;\r\n  });\r\n\r\nconst data = await promise;\r\nreturn data;\r\n\r\n \r\n});\r\nexport const deleteTask = createAsyncThunk(\"Task/deleteTask\", async (id) => {\r\n \r\n  \r\n  const  promise  = await axios.delete(\r\n    `http://localhost:5000/task/deleteTask/${id}`\r\n    \r\n  ).then((response) => {\r\n    const data = response.data;\r\n    return data;\r\n  });\r\n\r\nconst data = await promise;\r\nreturn data;\r\n\r\n\r\n});\r\n\r\n\r\n\r\nexport const taskSlice = createSlice({\r\n  name: \"Task\",\r\n  initialState: {\r\n    tasks: [],\r\n    nbrRemis: 0,\r\n    nbrMissing: 0,\r\n    status: null,\r\n    \r\n  },\r\n  extraReducers: {\r\n    [getTasks.pending]: (state, action) => {\r\n      state.status = \"loading\";\r\n    },\r\n    [getTasks.fulfilled]: (state, { payload }) => {\r\n      state.tasks = payload;\r\n      state.status = \"success\";\r\n    },\r\n    [UpdateResources.fulfilled]: (state, action) => {\r\n      state.files.push(action.payload);\r\n    },\r\n    [getTasks.rejected]: (state, action) => {\r\n      state.status = \"failed\";\r\n    },\r\n    [getTaskByTeacher.pending]: (state, action) => {\r\n      state.status = \"loading\";\r\n    },\r\n  \r\n    [getTaskByTeacher.fulfilled]: (state, action) => {\r\n      state.tasks = action.payload;\r\n      state.status = \"success\";\r\n    },\r\n    [getTaskByTeacher.rejected]: (state, action) => {\r\n      state.status = \"failed\";\r\n    },\r\n    [getDetailTask.pending]: (state, action) => {\r\n      state.status = \"loading\";\r\n    },\r\n    [getDetailTask.fulfilled]: (state, { payload }) => {\r\n      state.tasks = payload;\r\n      state.status = \"success\";\r\n    },\r\n    [getDetailTask.rejected]: (state, action) => {\r\n      state.status = \"failed\";\r\n    },\r\n\r\n    postTasks: (state, action) => {\r\n      state.tasks.push(action.payload);\r\n    },\r\n    [deleteTask.pending]: (state, action) => {\r\n      state.status = \"loading\";\r\n    },\r\n    [deleteTask.fulfilled]: (state, action ) => {\r\n      state.tasks = state.tasks.filter((u) => {\r\n        return u._id !== action.payload._id;\r\n      });\r\n      \r\n      state.status = \"success\";\r\n     \r\n    },\r\n    [deleteTask.rejected]: (state, action) => {\r\n      state.status = \"failed\";\r\n    },\r\n   \r\n    assignTask: (state, action) => {\r\n      state.tasks.push(action.payload);\r\n    },\r\n    [updateTask.pending]: (state, action) => {\r\n      state.status = \"loading\";\r\n    },\r\n    [updateTask.fulfilled]: (state, action ) => {\r\n     const index = state.tasks.findIndex(\r\n        (item) => item._id === action.payload._id\r\n      );\r\n      if (index !== -1) {\r\n        state.tasks[index] = action.payload;\r\n        state.status = \"success\";\r\n      }\r\n\r\n    },\r\n    [updateTask.rejected]: (state, action) => {\r\n      state.status = \"failed\";\r\n    },\r\n    [updateTaskStatus.pending]: (state, action) => {\r\n      state.status = \"loading\";\r\n    },\r\n    [updateTaskStatus.fulfilled]: (state, { payload }) => {\r\n      state.tasks = payload;\r\n    },\r\n    [updateTaskStatus.rejected]: (state, action) => {\r\n      state.status = \"failed\";\r\n    },\r\n    [getNbrTasksRemis.pending]: (state, action) => {\r\n      state.status = \"loading\";\r\n    },\r\n    [getNbrTasksRemis.fulfilled]: (state, action) => {\r\n      if (action.payload.length > 0) state.nbrRemis = action.payload[0].count;\r\n    },\r\n    [getNbrTasksRemis.rejected]: (state, action) => {\r\n      state.status = \"failed\";\r\n    },\r\n    [getNbrTasksMissing.pending]: (state, action) => {\r\n      state.status = \"loading\";\r\n    },\r\n    [getNbrTasksMissing.fulfilled]: (state, action) => {\r\n      if (action.payload.length > 0) state.nbrMissing = action.payload[0].count;\r\n    },\r\n    [getNbrTasksMissing.rejected]: (state, action) => {\r\n      state.status = \"failed\";\r\n    },\r\n    [assignAfterSave.pending]: (state, action) => {\r\n      state.status = \"loading\";\r\n    },\r\n    [assignAfterSave.fulfilled]: (state, action) => {\r\n      const payload = action.payload;\r\n      const index = state.tasks.findIndex(\r\n        (item) => item._id === payload._id\r\n      );\r\n      if (index !== -1) {\r\n        state.tasks[index] = payload;\r\n        state.status = \"success\";\r\n      }\r\n    },\r\n    [assignAfterSave.rejected]: (state, action) => {\r\n      state.status = \"failed\";\r\n    },\r\n  },\r\n});\r\n\r\nexport default taskSlice.reducer;\r\n"]},"metadata":{},"sourceType":"module"}