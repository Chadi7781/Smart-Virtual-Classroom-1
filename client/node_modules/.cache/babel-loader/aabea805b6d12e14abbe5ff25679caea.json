{"ast":null,"code":"var _jsxFileName = \"C:\\\\Smart-Virtual-Classroom\\\\client\\\\src\\\\Components\\\\board\\\\Board.jsx\";\nimport React from 'react';\nimport io from 'socket.io-client';\nimport './style.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Board extends React.Component {\n  constructor(props) {\n    super(props);\n    this.socket = io.connect(\"https://closer-server.herokuapp.com\");\n    this.isDrawing = false;\n    this.socket.on(\"canvas-data\", function (data) {\n      var root = this;\n      var interval = setInterval(function () {\n        if (root.isDrawing) return;\n        root.isDrawing = true;\n        clearInterval(interval);\n        var image = new Image();\n        var canvas = document.querySelector('#board');\n        var ctx = canvas.getContext('2d');\n\n        image.onload = function () {\n          ctx.drawImage(image, 0, 0);\n          root.isDrawing = false;\n        };\n\n        image.src = data;\n      }, 200);\n    });\n  }\n\n  componentDidMount() {\n    this.drawOnCanvas();\n  }\n\n  componentWillReceiveProps(newProps) {\n    this.ctx.strokeStyle = newProps.color;\n    this.ctx.lineWidth = newProps.size;\n  }\n\n  drawOnCanvas() {\n    var canvas = document.querySelector('#board');\n    this.ctx = canvas.getContext('2d');\n    var ctx = this.ctx;\n    var sketch = document.querySelector('#sketch');\n    var sketch_style = getComputedStyle(sketch);\n    canvas.width = parseInt(sketch_style.getPropertyValue('width'));\n    canvas.height = parseInt(sketch_style.getPropertyValue('height'));\n    var mouse = {\n      x: 0,\n      y: 0\n    };\n    var last_mouse = {\n      x: 0,\n      y: 0\n    };\n    /* Mouse Capturing Work */\n\n    canvas.addEventListener('mousemove', function (e) {\n      last_mouse.x = mouse.x;\n      last_mouse.y = mouse.y;\n      mouse.x = e.pageX - this.offsetLeft;\n      mouse.y = e.pageY - this.offsetTop;\n    }, false);\n    /* Drawing on Paint App */\n\n    ctx.lineWidth = this.props.size;\n    ctx.lineJoin = 'round';\n    ctx.lineCap = 'round';\n    ctx.strokeStyle = this.props.color;\n    canvas.addEventListener('mousedown', function (e) {\n      canvas.addEventListener('mousemove', onPaint, false);\n    }, false);\n    canvas.addEventListener('mouseup', function () {\n      canvas.removeEventListener('mousemove', onPaint, false);\n    }, false);\n    var root = this;\n\n    var onPaint = function () {\n      ctx.beginPath();\n      ctx.moveTo(last_mouse.x, last_mouse.y);\n      ctx.lineTo(mouse.x, mouse.y);\n      ctx.closePath();\n      ctx.stroke();\n      if (root.timeout != undefined) clearTimeout(root.timeout);\n      root.timeout = setTimeout(function () {\n        var base64ImageData = canvas.toDataURL(\"image/png\");\n        root.socket.emit(\"canvas-data\", base64ImageData);\n      }, 1000);\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"sketch\",\n      id: \"sketch\",\n      children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n        className: \"board\",\n        id: \"board\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Board;","map":{"version":3,"sources":["C:/Smart-Virtual-Classroom/client/src/Components/board/Board.jsx"],"names":["React","io","Board","Component","constructor","props","socket","connect","isDrawing","on","data","root","interval","setInterval","clearInterval","image","Image","canvas","document","querySelector","ctx","getContext","onload","drawImage","src","componentDidMount","drawOnCanvas","componentWillReceiveProps","newProps","strokeStyle","color","lineWidth","size","sketch","sketch_style","getComputedStyle","width","parseInt","getPropertyValue","height","mouse","x","y","last_mouse","addEventListener","e","pageX","offsetLeft","pageY","offsetTop","lineJoin","lineCap","onPaint","removeEventListener","beginPath","moveTo","lineTo","closePath","stroke","timeout","undefined","clearTimeout","setTimeout","base64ImageData","toDataURL","emit","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport io from 'socket.io-client';\n\nimport './style.css';\n\nclass Board extends React.Component {\n\n    timeout;\n    socket = io.connect(\"https://closer-server.herokuapp.com\");\n\n    ctx;\n    isDrawing = false;\n\n    constructor(props) {\n        super(props);\n\n        this.socket.on(\"canvas-data\", function(data){\n\n            var root = this;\n            var interval = setInterval(function(){\n                if(root.isDrawing) return;\n                root.isDrawing = true;\n                clearInterval(interval);\n                var image = new Image();\n                var canvas = document.querySelector('#board');\n                var ctx = canvas.getContext('2d');\n                image.onload = function() {\n                    ctx.drawImage(image, 0, 0);\n\n                    root.isDrawing = false;\n                };\n                image.src = data;\n            }, 200)\n        })\n    }\n\n    componentDidMount() {\n        this.drawOnCanvas();\n    }\n\n    componentWillReceiveProps(newProps) {\n        this.ctx.strokeStyle = newProps.color;\n        this.ctx.lineWidth = newProps.size;\n    }\n\n    drawOnCanvas() {\n        var canvas = document.querySelector('#board');\n        this.ctx = canvas.getContext('2d');\n        var ctx = this.ctx;\n\n        var sketch = document.querySelector('#sketch');\n        var sketch_style = getComputedStyle(sketch);\n        canvas.width = parseInt(sketch_style.getPropertyValue('width'));\n        canvas.height = parseInt(sketch_style.getPropertyValue('height'));\n\n        var mouse = {x: 0, y: 0};\n        var last_mouse = {x: 0, y: 0};\n\n        /* Mouse Capturing Work */\n        canvas.addEventListener('mousemove', function(e) {\n            last_mouse.x = mouse.x;\n            last_mouse.y = mouse.y;\n\n            mouse.x = e.pageX - this.offsetLeft;\n            mouse.y = e.pageY - this.offsetTop;\n        }, false);\n\n\n        /* Drawing on Paint App */\n        ctx.lineWidth = this.props.size;\n        ctx.lineJoin = 'round';\n        ctx.lineCap = 'round';\n        ctx.strokeStyle = this.props.color;\n\n        canvas.addEventListener('mousedown', function(e) {\n            canvas.addEventListener('mousemove', onPaint, false);\n        }, false);\n\n        canvas.addEventListener('mouseup', function() {\n            canvas.removeEventListener('mousemove', onPaint, false);\n        }, false);\n\n        var root = this;\n        var onPaint = function() {\n            ctx.beginPath();\n            ctx.moveTo(last_mouse.x, last_mouse.y);\n            ctx.lineTo(mouse.x, mouse.y);\n            ctx.closePath();\n            ctx.stroke();\n\n            if(root.timeout != undefined) clearTimeout(root.timeout);\n            root.timeout = setTimeout(function(){\n                var base64ImageData = canvas.toDataURL(\"image/png\");\n                root.socket.emit(\"canvas-data\", base64ImageData);\n            }, 1000)\n        };\n    }\n\n    render() {\n        return (\n            <div class=\"sketch\" id=\"sketch\">\n                <canvas className=\"board\" id=\"board\"></canvas>\n            </div>\n        )\n    }\n}\n\nexport default Board"]},"metadata":{},"sourceType":"module"}