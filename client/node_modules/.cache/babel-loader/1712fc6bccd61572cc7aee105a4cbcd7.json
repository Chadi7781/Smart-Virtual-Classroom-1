{"ast":null,"code":"var _jsxFileName = \"C:\\\\Smart-Virtual-Classroom\\\\client\\\\src\\\\Components\\\\coursesAndSeances\\\\FormCourses.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport \"react-dropzone-uploader/dist/styles.css\";\nimport Dropzone from \"react-dropzone-uploader\";\nimport { Button, Dimmer, Dropdown, Form, Header, Loader, Message, Select } from \"semantic-ui-react\";\nimport { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { AddCourses, RetrieveCoursesByIdClass } from \"../../redux/slices/Courses\";\nimport TextareaAutosize from \"react-textarea-autosize\";\nimport { useParams } from \"react-router\";\nimport { isAuth, signout } from \"../../helpers/auth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction FormCourses(props) {\n  _s();\n\n  const seances = useSelector(state => state.seance.seance);\n  const {\n    id\n  } = useParams();\n  const [titre, SetTitre] = useState(\"\");\n  const [description, SetDescription] = useState(\"\");\n  const [idSance, SetIdSeance] = useState(2);\n  const [dateCreation, SetDateCreation] = useState(Date.now());\n  const [multiple_resources, SetMultiple_resources] = useState([]);\n  const [formClassName, SetFormClassName] = useState(\"\");\n  const [formSuccessMessage, SetFormSuccessMessage] = useState(\"\");\n  const [formErrorMessage, SetFormErrorMessage] = useState(\"\");\n  const [selectedItem, SetSelectedItem] = useState();\n  const [loader, SetLoader] = useState(false);\n  const CurrentClass = JSON.parse(localStorage.getItem(\"idClass\"));\n  const idClass = CurrentClass._id;\n  const SeanceOptions = [{\n    key: Number,\n    text: \"\",\n    value: \"\"\n  }];\n  const dispatch = useDispatch();\n\n  for (let i = 0; i < seances.length; i++) {\n    const option = {\n      key: seances[i]._id,\n      text: seances[i].titre,\n      value: seances[i].titre\n    };\n    SeanceOptions.push(option);\n  }\n\n  const handleChangeSelect = async e => {\n    console.log(e.target.value);\n    await SetSelectedItem(e.target.value);\n    await console.log(selectedItem);\n  };\n\n  const handleTitreChanges = e => {\n    console.log(id);\n    SetTitre(e.target.value);\n  };\n\n  const handleDescriptionChanges = e => {\n    SetDescription(e.target.value);\n  };\n\n  const AddCourse = e => {\n    e.preventDefault();\n\n    const idOwner = isAuth()._id;\n\n    SetLoader(true);\n    const rep = dispatch(AddCourses(selectedItem, titre, description, multiple_resources, idOwner, idClass)).then(response => {\n      SetLoader(false);\n      console.log(response);\n      const CurrentClass = JSON.parse(localStorage.getItem(\"idClass\"));\n      console.log(CurrentClass._id);\n      dispatch(RetrieveCoursesByIdClass(CurrentClass._id));\n      console.log(response);\n      SetFormClassName(\"success\");\n      SetFormSuccessMessage(response.msg);\n    }).catch(err => {\n      if (err.response) {\n        if (err.response.data) {\n          SetFormClassName(\"warning\");\n          SetFormErrorMessage(err.response.msg);\n        }\n      } else {\n        SetFormClassName(\"warning\");\n        SetFormErrorMessage(\"Something wen wrong \" + err);\n      }\n    });\n  };\n\n  const handleChangeStatus = ({\n    meta,\n    file\n  }, status) => {\n    console.log(status, meta, file);\n\n    if (status === \"done\") {\n      SetMultiple_resources(multiple_resources.concat(file));\n    }\n\n    if (status === \"removed\") {\n      let multiple_resource = multiple_resources.slice();\n      multiple_resource = multiple_resources.filter(u => {\n        return u !== file;\n      });\n      SetMultiple_resources(multiple_resource);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      className: formClassName,\n      onSubmit: AddCourse,\n      children: [/*#__PURE__*/_jsxDEV(Form.Input, {\n        label: \"Titre\",\n        type: \"text\",\n        placeholder: \"Seance 1\",\n        name: \"Titre\",\n        maxLength: \"40\",\n        required: true,\n        value: titre,\n        onChange: handleTitreChanges\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n        control: TextareaAutosize,\n        label: \"Description\",\n        type: \"text\",\n        placeholder: \"In this workshop we will learn ...\",\n        name: \"Description\",\n        required: true,\n        value: description,\n        onChange: handleDescriptionChanges\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Header, {\n        as: \"h5\",\n        icon: \"file alternate outline\",\n        content: \"Select Seance\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: selectedItem,\n        onChange: handleChangeSelect,\n        children: SeanceOptions.map((c, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: c.key,\n          children: c.text\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Header, {\n        as: \"h5\",\n        icon: \"images outline\",\n        content: \"Select Files\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Dropzone, {\n        styles: {\n          dropzone: {\n            minHeight: 120,\n            maxHeight: 250\n          }\n        },\n        onChangeStatus: handleChangeStatus\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this), loader ? /*#__PURE__*/_jsxDEV(Dimmer, {\n        active: true,\n        inverted: true,\n        children: /*#__PURE__*/_jsxDEV(Loader, {\n          inline: \"centered\",\n          children: \"Preparing Files ... please wait !\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Message, {\n          success: true,\n          color: \"green\",\n          header: \"Nice one! \\uD83D\\uDCD2 \\uD83D\\uDCD5 \\uD83D\\uDCDA \\uD83D\\uDCD6\",\n          content: formSuccessMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Message, {\n          warning: true,\n          color: \"yellow\",\n          header: \"Woah! \\uD83D\\uDE31 \\uD83D\\uDE28\",\n          content: formErrorMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        color: \"black\",\n        floated: \"right\",\n        children: \"Add\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 5\n  }, this);\n}\n\n_s(FormCourses, \"hMo4nd8A88ATJJrAxoyvh3CtzPs=\", false, function () {\n  return [useSelector, useParams, useDispatch];\n});\n\n_c = FormCourses;\nexport default FormCourses;\n\nvar _c;\n\n$RefreshReg$(_c, \"FormCourses\");","map":{"version":3,"sources":["C:/Smart-Virtual-Classroom/client/src/Components/coursesAndSeances/FormCourses.js"],"names":["React","Dropzone","Button","Dimmer","Dropdown","Form","Header","Loader","Message","Select","useState","useEffect","useDispatch","useSelector","AddCourses","RetrieveCoursesByIdClass","TextareaAutosize","useParams","isAuth","signout","FormCourses","props","seances","state","seance","id","titre","SetTitre","description","SetDescription","idSance","SetIdSeance","dateCreation","SetDateCreation","Date","now","multiple_resources","SetMultiple_resources","formClassName","SetFormClassName","formSuccessMessage","SetFormSuccessMessage","formErrorMessage","SetFormErrorMessage","selectedItem","SetSelectedItem","loader","SetLoader","CurrentClass","JSON","parse","localStorage","getItem","idClass","_id","SeanceOptions","key","Number","text","value","dispatch","i","length","option","push","handleChangeSelect","e","console","log","target","handleTitreChanges","handleDescriptionChanges","AddCourse","preventDefault","idOwner","rep","then","response","msg","catch","err","data","handleChangeStatus","meta","file","status","concat","multiple_resource","slice","filter","u","map","c","index","dropzone","minHeight","maxHeight"],"mappings":"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","sourcesContent":["import React from \"react\";\r\n\r\nimport \"react-dropzone-uploader/dist/styles.css\";\r\n\r\nimport Dropzone from \"react-dropzone-uploader\";\r\nimport {\r\n  Button,\r\n  Dimmer,\r\n  Dropdown,\r\n  Form,\r\n  Header,\r\n  Loader,\r\n  Message,\r\n  Select,\r\n} from \"semantic-ui-react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  AddCourses,\r\n  RetrieveCoursesByIdClass,\r\n} from \"../../redux/slices/Courses\";\r\nimport TextareaAutosize from \"react-textarea-autosize\";\r\n\r\nimport { useParams } from \"react-router\";\r\nimport { isAuth, signout } from \"../../helpers/auth\";\r\n\r\nfunction FormCourses(props) {\r\n  const seances = useSelector((state) => state.seance.seance);\r\n  const { id } = useParams();\r\n  const [titre, SetTitre] = useState(\"\");\r\n  const [description, SetDescription] = useState(\"\");\r\n  const [idSance, SetIdSeance] = useState(2);\r\n  const [dateCreation, SetDateCreation] = useState(Date.now());\r\n  const [multiple_resources, SetMultiple_resources] = useState([]);\r\n  const [formClassName, SetFormClassName] = useState(\"\");\r\n  const [formSuccessMessage, SetFormSuccessMessage] = useState(\"\");\r\n  const [formErrorMessage, SetFormErrorMessage] = useState(\"\");\r\n  const [selectedItem, SetSelectedItem] = useState();\r\n  const [loader, SetLoader] = useState(false);\r\n  const CurrentClass = JSON.parse(localStorage.getItem(\"idClass\"));\r\n  const idClass = CurrentClass._id;\r\n\r\n  const SeanceOptions = [{ key: Number, text: \"\", value: \"\" }];\r\n  const dispatch = useDispatch();\r\n  for (let i = 0; i < seances.length; i++) {\r\n    const option = {\r\n      key: seances[i]._id,\r\n      text: seances[i].titre,\r\n      value: seances[i].titre,\r\n    };\r\n\r\n    SeanceOptions.push(option);\r\n  }\r\n\r\n  const handleChangeSelect = async (e) => {\r\n    console.log(e.target.value);\r\n    await SetSelectedItem(e.target.value);\r\n    await console.log(selectedItem);\r\n  };\r\n  const handleTitreChanges = (e) => {\r\n    console.log(id);\r\n    SetTitre(e.target.value);\r\n  };\r\n  const handleDescriptionChanges = (e) => {\r\n    SetDescription(e.target.value);\r\n  };\r\n  const AddCourse = (e) => {\r\n    e.preventDefault();\r\n    const idOwner = isAuth()._id;\r\n    SetLoader(true);\r\n    const rep = dispatch(\r\n      AddCourses(\r\n        selectedItem,\r\n        titre,\r\n        description,\r\n        multiple_resources,\r\n        idOwner,\r\n        idClass\r\n      )\r\n    )\r\n      .then((response) => {\r\n        SetLoader(false);\r\n        console.log(response);\r\n\r\n        const CurrentClass = JSON.parse(localStorage.getItem(\"idClass\"));\r\n        console.log(CurrentClass._id);\r\n        dispatch(RetrieveCoursesByIdClass(CurrentClass._id));\r\n        console.log(response);\r\n        SetFormClassName(\"success\");\r\n        SetFormSuccessMessage(response.msg);\r\n      })\r\n      .catch((err) => {\r\n        if (err.response) {\r\n          if (err.response.data) {\r\n            SetFormClassName(\"warning\");\r\n            SetFormErrorMessage(err.response.msg);\r\n          }\r\n        } else {\r\n          SetFormClassName(\"warning\");\r\n          SetFormErrorMessage(\"Something wen wrong \" + err);\r\n        }\r\n      });\r\n  };\r\n\r\n  const handleChangeStatus = ({ meta, file }, status) => {\r\n    console.log(status, meta, file);\r\n\r\n    if (status === \"done\") {\r\n      SetMultiple_resources(multiple_resources.concat(file));\r\n    }\r\n    if (status === \"removed\") {\r\n      let multiple_resource = multiple_resources.slice();\r\n      multiple_resource = multiple_resources.filter((u) => {\r\n        return u !== file;\r\n      });\r\n      SetMultiple_resources(multiple_resource);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Form className={formClassName} onSubmit={AddCourse}>\r\n        <Form.Input\r\n          label=\"Titre\"\r\n          type=\"text\"\r\n          placeholder={\"Seance 1\"}\r\n          name=\"Titre\"\r\n          maxLength=\"40\"\r\n          required\r\n          value={titre}\r\n          onChange={handleTitreChanges}\r\n        />\r\n        <Form.Field\r\n          control={TextareaAutosize}\r\n          label=\"Description\"\r\n          type=\"text\"\r\n          placeholder=\"In this workshop we will learn ...\"\r\n          name=\"Description\"\r\n          required\r\n          value={description}\r\n          onChange={handleDescriptionChanges}\r\n        />\r\n        <Header as=\"h5\" icon=\"file alternate outline\" content=\"Select Seance\" />\r\n\r\n        <select value={selectedItem} onChange={handleChangeSelect}>\r\n          {SeanceOptions.map((c, index) => (\r\n            <option key={index} value={c.key}>\r\n              {c.text}\r\n            </option>\r\n          ))}\r\n        </select>\r\n\r\n        <Header as=\"h5\" icon=\"images outline\" content=\"Select Files\" />\r\n\r\n        <Dropzone\r\n          styles={{ dropzone: { minHeight: 120, maxHeight: 250 } }}\r\n          onChangeStatus={handleChangeStatus}\r\n        />\r\n        <br />\r\n        {loader ? (\r\n          <Dimmer active inverted>\r\n            <Loader inline=\"centered\">Preparing Files ... please wait !</Loader>\r\n          </Dimmer>\r\n        ) : (\r\n          <>\r\n            <Message\r\n              success\r\n              color=\"green\"\r\n              header=\"Nice one! 📒 📕 📚 📖\"\r\n              content={formSuccessMessage}\r\n            />\r\n            <Message\r\n              warning\r\n              color=\"yellow\"\r\n              header=\"Woah! 😱 😨\"\r\n              content={formErrorMessage}\r\n            />\r\n          </>\r\n        )}\r\n\r\n        <br />\r\n        <Button color=\"black\" floated=\"right\">\r\n          Add\r\n        </Button>\r\n        <br />\r\n        <br />\r\n      </Form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FormCourses;\r\n"]},"metadata":{},"sourceType":"module"}